<plantilla>
	<!-- Esta primer condición la tenemos comentada por defecto. Sirve para elegir la impresión por ticket o por A4 -->
	<!-- Si se descomenta, imprimiría por A4 si no es FS o si es una devolución y el ticket origen no es FS e imprimiría por ticket si es FS o es una devolución y el ticket origen es FS-->
	## #if( (!$ticket.getCabecera().getDatosDocOrigen() && ($ticket.getCabecera().getCodTipoDocumento() != "FS" && $ticket.getCabecera().getCodTipoDocumento() != "VC")) || ($ticket.getCabecera().getDatosDocOrigen() && ($ticket.getCabecera().getDatosDocOrigen().getCodTipoDoc() != "FS" && $ticket.getCabecera().getDatosDocOrigen().getCodTipoDoc() != "VC")) )
	<!--	 <documento salida="impresora2" procesador="JASPER" fichero="facturas/facturaA4">
        </documento>
        <documento salida="impresora1">  -->

	##	#foreach ($pago in $ticket.getPagos())
	##		#set($esBoletaCompleta = true)
	##		#parse("./plantillas/detalle_pagos_boletas.xml")
	##	#end
	##	#parse("./plantillas/detalle_comprobantes_giftcard.xml")
	<!-- </documento> -->

	## #else
	#set($tienePagoGiftcard = false)
	#foreach ($pago in $ticket.getPagos())
	#if (${pago.isPagoTarjetaRegalo()})
	#set($tienePagoGiftcard = true)
	#break
	#end
	#end
	## #if(!$paperLess || ( $paperLess && ($ticket.getCabecera().getDatosEnvio() || $tienePagoGiftcard)))
	<documento salida="impresora1">
		##if(!$paperLess)
		#if(!${salida.equals("pantalla")} && ${aperturaCajon})
			<apertura-cajon></apertura-cajon>
		#end
		
		<linea><texto pre-command="27;116;16"></texto></linea>


		#set( $imprimirDatosFacturacion =  $ticket.getCabecera().getCliente().getDatosFactura())
		#parse("./plantillas/datos_cabecera.xml")

		<linea line-size = "1">
			<texto size="41" align="center">${ticket.getCabecera().getDesTipoDocumento().toUpperCase()}</texto>
		</linea>
		
		<linea>
			#if(${esCopia})
			<texto size="41" align="center">ES COPIA</texto>
			#else
			<texto size="41" align="center">DOCUMENTO ORIGINAL</texto>
			#end
		</linea>
		
		<linea><texto> </texto></linea>
		
		<linea>
			<texto align="left" size="13" style="1">Nº Documento:</texto>
			<texto align="right" size="27" style="1">${ticket.getCabecera().getCodTicket()}</texto>
		</linea>
		
		#if(${ticket.getCabecera().getDatosDocOrigen()})
			<linea>
				<texto align="left" size="23" style="1">Nº Documento original:</texto>
				<texto align="right" size="18" style="1">${ticket.getCabecera().getDatosDocOrigen().getCodTicket()}</texto>
			</linea>
		#end
		
		<linea>
			<texto align="left" size="10">Fecha:</texto>
			<texto align="right" size="30">${ticket.getCabecera().getFechaAsLocale()}</texto>
		</linea>
		
		<linea>
			<texto align="left" size="12">Le atendió:</texto>
			<texto align="right" size="28">${ticket.getCabecera().getCajero().getDesusuario()}</texto>
		</linea>
		
		<linea><texto> </texto></linea>

		## DIVISA
		#set($divisa = "")
		#if(${ticket.getCabecera().getDivisa()})
			#if(${ticket.getCabecera().getDivisa().equals("EUR")})
				#set($divisa = "€")
			#end
		#end

		<linea> <texto style ="3">DESCRIPCION           UDS  PRECIO  TOTAL</texto> </linea>
		## LINEAS
		#set($puntosConsumidos = 0)
		#foreach ($linea in $lineas)
			#if($linea.isImprimir())
				#if($linea.getArticlePoints() && $linea.getArticlePoints().getReedem().equals("1"))
						#set($puntosConsumidos = $puntosConsumidos + $linea.getArticlePoints().getPoints())
				#end
				<!--	Articulos por linea		80mm, f=4, s=55 -->
				<linea>
					<texto size="46" align="left" fontsize="4" style="1">${linea.getArticulo().getDesArticulo()}</texto>
					<texto size="8" align="right" fontsize="4" style="1"> </texto>
				</linea>

				<linea>
					<texto size="20" align="left" fontsize="4">${linea.getArticulo().getCodArticulo()}</texto>
					<texto size="12" align="left" fontsize="4" style="2"> </texto>
					<texto size="4" align="left" fontsize="4">${linea.getCantidad().intValue().toString()}</texto>
					#if($linea.getArticlePoints() && $linea.getArticlePoints().getReedem().equals("1"))
						<texto size="9" align="left" fontsize="4">$linea.getPrecioTotalTarifaOrigen().setScale(2, 4)$divisa</texto>
						<texto size="9" align="right" fontsize="4">$linea.getPrecioTotalTarifaOrigen().setScale(2, 4)$divisa</texto>
					#else
						<texto size="9" align="left" fontsize="4">${linea.getPrecioTotalSinDtoAsString()}$divisa</texto>
						<texto size="9" align="right" fontsize="4">${linea.getImporteTotalSinDtoAsString()}$divisa</texto>
					#end
				</linea>

				#if($linea.getLote())
					<linea>
						<texto size="37" align="left" fontsize="4" style="1">** Lote: ${linea.getLote().getLote()} </texto>
						<texto size="18" align="right" fontsize="4" style="1"> F. Cad: ${linea.getLote().getFechaCaducidadString()}</texto>
					</linea>
				#end

				#if($linea.getInyectable())
					<linea>
						<texto size="37" align="left" fontsize="4" style="1">** Cantidad suministrada: ${linea.getInyectable().getCantidadSuministrada().setScale(0, 4)} ${linea.getInyectable().getUnidadMedidaSuministrada()} </texto>
					</linea>
				#end

				#if($linea.getContratoAnimal() && $linea.getContratoAnimal().getTipoIden() && $linea.getContratoAnimal().getNumIden())
					<linea>
						<texto size="55" align="left" fontsize="4" style="1">** ${linea.getContratoAnimal().getTipoIden()}: ${linea.getContratoAnimal().getNumIden()}</texto>
					</linea>
				#elseif($linea.getDetallesTrazabilidad())
					#foreach($detalle in $linea.getDetallesTrazabilidad())
						<linea>
							<texto size="55" align="left" fontsize="4" style="1">** ${detalle.getFldName()}: ${detalle.getIdentificacionTrazabilidad()}</texto>
						</linea>
					#end
				#end

				#if($linea.getArticlePoints() && $linea.getArticlePoints().getReedem().equals("1"))
					<linea>
						<texto size="38" align="left" fontsize="4" style="1">**Promo: Articulo canjeado por $linea.getArticlePoints().getPoints().setScale(0, 4) puntos</texto>
						<texto size="16" align="right" fontsize="4" style="1">$linea.getImporteTotalConDto().subtract($linea.getPrecioTotalTarifaOrigen()).setScale(2, 4)$divisa</texto>
					</linea>
				#elseif($linea.getPegatinaPromocional())
					<linea>
						<texto size="38" align="left" fontsize="4" style="1">** Promo demarca: </texto>
						<texto size="16" align="right" fontsize="4" style="1">-${linea.getImporteTotalSinDto().multiply($linea.getPegatinaPromocional().getDiscount().divide($bigDecimalCien)).setScale(2,4)}
						</texto>
					</linea>
				#elseif($linea.getPromociones())
					#foreach ($promo in $linea.getPromociones())
						#if($promo.getAcceso().equals("PROMOCION") && $promo.getImporteTotalDtoMenosMargen().doubleValue() > 0 )
						<linea>
							#foreach ($textoPromo in $linea.getTextosPromociones())
								#if($textoPromo.getIdPromocion().equals($promo.getIdPromocion()))
										<texto size="38" align="left" fontsize="4" style="1">** Promo: $linea.getTextoLineaPromocion($promo.getIdPromocion())</texto>
										<texto size="16" align="right" fontsize="4" style="1">-${promo.getImporteTotalDtoMenosMargen().multiply($linea.getCantidad()).setScale(2,4)}</texto>
								#end
							#end
						</linea>
						#end
					#end
				#end

				#foreach ($numeroSerie in $linea.getNumerosSerie())
					<linea>
						<texto size="41" align="left">   *NS:${numeroSerie}</texto>
					</linea>
				#end
			#end
		#end

		<!--	Promoción linea	-->
		#if($ticket.getPromociones())
			#printLineaEnBlanco()
			#foreach ($promo in $ticket.getPromociones())
				#if(!$promo.getImporteTotalAhorroAsString().equals("0,00") && ($promo.getAcceso().equals("CODIGO") || $promo.getAcceso().equals("CUPON")))
					#set($ispromoprint = "true")
				#end
			#end
			#if($ispromoprint)
				#printIfLinea("Cupones aplicados:" "left" "1" "55" "4")
			#end
			#foreach ($promo in $ticket.getPromociones())
				#if(!$promo.getImporteTotalAhorroAsString().equals("0,00") && ($promo.getAcceso().equals("CODIGO") || $promo.getAcceso().equals("CUPON")))
					<linea>
						#set($promolinea = "")
						<texto size="1" align="right" fontsize="4"> </texto>
						<texto size="42" align="left" fontsize="4">$promo.getTextoPromocion(): $promo.getAcceso().substring(0,1)$promo.getCodAcceso()</texto>
						<texto size="1" align="right" fontsize="4"> </texto>
						<texto size="10" align="right" fontsize="4">-$promo.getImporteTotalAhorroAsString()$divisa</texto>
					</linea>
				#end
			#end
		#end

		#if(${ticket.getCuponesEmitidos()} && ${ticket.getCuponesEmitidos().size()} > 0 )
			#printIfLinea("Cupones emitidos:" "left" "1" "55" "4")
			#foreach ($cupon in $ticket.getCuponesEmitidos())
				<linea>
					<texto size="55" align="left" fontsize="4" > ${cupon.getTituloCupon()}: ${cupon.getCodigoCupon()}</texto>
				</linea>
			#end
		#end

		<linea><texto></texto></linea>

		#if(${ticket.getCabecera().getDatosDocOrigen()} || ${ticket.getCabecera().getDatosOrigenFalsos()} )
			#printIfLineaEtiqueta("Total artículos" "-${ticket.getCabecera().getTotalArticulosImpresos()}" "right" "0" "41")
		#else
			#printIfLineaEtiqueta("Total artículos" "${ticket.getCabecera().getTotalArticulosImpresos()}" "right" "0" "41")
		#end

		#if(!${ticket.getTotales().getTotalPromocionesAsString().equals("0,00")})
			#printIfLineaEtiqueta("Total ahorrado" "${ticket.getTotales().getTotalPromocionesAsString()}$divisa" "right" "0" "41")
		#end

		## TOTALES
		<linea line-size = "1">
			<texto size="31" align="right" >TOTAL(Imp. incl.): </texto>
			<texto size="10" align="right" >${ticket.getTotales().getTotalAPagarAsString()}$divisa</texto>
		</linea>
		
		<linea> <texto> </texto> </linea>
		
		#parse("./plantillas/detalle_pagos.xml")
		#if(!${ticket.getTotales().getCambioAsString().equals("0,00")})
			<linea>
				<texto size="31" align="right">CAMBIO</texto>
				<texto size="10" align="right">${ticket.getTotales().getCambioAsString()}$divisa</texto>
			</linea>
		#end
		
		<linea>
			<texto size="10" align="right">BASE</texto>
			<texto size="11" align="right">IMPUESTO</texto>
			<texto size="10" align="right">CUOTA</texto>
			<texto size="10" align="right">TOTAL</texto>
		</linea>
		
		#foreach ($impuesto in $impuestos)
			#if(!${impuesto.getBaseAsString().equals("0,00")})
				<linea>
					<texto size="10" align="right">${impuesto.getBaseAsString()}$divisa</texto>
					<texto size="11" align="right">${impuesto.getPorcentajeAsString()}%</texto>
					<texto size="10" align="right">${impuesto.getCuotaAsString()}$divisa</texto>
					<texto size="10" align="right">${impuesto.getTotalAsString()}$divisa</texto>
				</linea>
			#end
		#end	

		#FIDELIZADO y PUNTOS

		#if(${ticket.getCabecera().getDatosFidelizado()})

			#if (!${ticket.getCabecera().getDatosFidelizado().getAdicionales().get("GLOVO")} && !${ticket.getCabecera().getDatosFidelizado().getAdicionales().get("UBER")})

				#if (${ticket.getCabecera().getDatosFidelizado().getAdicionales().get("aplicaFidelizacion")})
					#set($aplicaFidelizacion = ${ticket.getCabecera().getDatosFidelizado().getAdicionales().get("aplicaFidelizacion")})
				#end
				##printLineaSubrayado()

				<!--#if($aplicaFidelizacion)
					<linea> <texto size="41" align="center" style="1">DATOS FIDELIZACIÓN</texto> </linea>
				#else
					<linea> <texto size="41" align="center" style="1">DATOS CLIENTE</texto> </linea>
				#end-->
				<linea><texto size="41" align="center">-----------------------------------------</texto></linea>
				##printLineaSubrayado()
				#if (${ticket.getCabecera().getDatosFidelizado().getNombre()} || ${ticket.getCabecera().getDatosFidelizado().getApellido()})
					<linea>
						#set( $fullname = "")
						#if (${ticket.getCabecera().getDatosFidelizado().getNombre()})
							#set( $fullname = "$fullname${ticket.getCabecera().getDatosFidelizado().getNombre()} ")
						#end
						#if (${ticket.getCabecera().getDatosFidelizado().getApellido()})
							#set( $fullname = "$fullname${ticket.getCabecera().getDatosFidelizado().getApellido()}")
						#end
						<texto align="left" size="16">Cliente:</texto>
						<texto align="right" size="25">$esc.xml($fullname)</texto>
					</linea>
				#end

				#if($aplicaFidelizacion)
					#if(${ticket.getCabecera().getDatosFidelizado().getNumTarjetaFidelizado()})
					<linea>
						<texto align="left" size="16">Tarjeta:</texto>
						<texto align="right" size="25">${ticket.getCabecera().getDatosFidelizado().getNumTarjetaFidelizado()}</texto>
					</linea>
					#end

					#if(${ticket.getCabecera().getDatosFidelizado().getAdicionales()})

						#if (${ticket.getCabecera().getDatosFidelizado().getAdicionales().get("saldoNoDisponible")})
							#set($puntosNoDisponibles = ${ticket.getCabecera().getDatosFidelizado().getAdicionales().get("saldoNoDisponible")})
						#end

						#if (${ticket.getCabecera().getDatosFidelizado().getAdicionales().get("aplicaCarencia")})
							#set($aplicaCarencia = ${ticket.getCabecera().getDatosFidelizado().getAdicionales().get("aplicaCarencia")})
						#end

					#end

					#if(${ticket.getCabecera().getDatosDocOrigen()} || ${ticket.getCabecera().getDatosOrigenFalsos()} )
						<linea>
							<texto align="left" size="31">Puntos retirados:</texto>
							#if (${ticket.getCabecera().getUidActividad().contains("TIENDA_ANIMAL")})
								<texto align="right" size="10">${ticket.getPuntosDevueltosAsBigDecimal().setScale(0, 4)}</texto>
							#else
								<texto align="right" size="10">${ticket.getPuntosDevueltosAsBigDecimal().setScale(2, 4)}</texto>
							#end
						</linea>
						
						<linea>
							<texto align="left" size="31">Puntos disponibles:</texto>
							#if ($aplicaCarencia && !${ticket.getCabecera().getDatosOrigenFalsos()})
								#if (${ticket.getCabecera().getUidActividad().contains("TIENDA_ANIMAL")})
								<texto align="right" size="10">${ticket.getCabecera().getDatosFidelizado().getSaldoTotal().setScale(0, 4)}</texto>
								#else
								<texto align="right" size="10">${ticket.getCabecera().getDatosFidelizado().getSaldoTotal().setScale(2, 4)}</texto>
								#end
							#else
								#if (${ticket.getCabecera().getUidActividad().contains("TIENDA_ANIMAL")})
									<texto align="right" size="10">${ticket.getCabecera().getDatosFidelizado().getSaldoTotal().subtract($ticket.getPuntosDevueltosAsBigDecimal()).setScale(0, 4)}</texto>
								#else
									<texto align="right" size="10">${ticket.getCabecera().getDatosFidelizado().getSaldoTotal().subtract($ticket.getPuntosDevueltosAsBigDecimal()).setScale(2, 4)}</texto>
								#end
							#end

						</linea>

						#if ($aplicaCarencia && $ticket.getPuntosDevueltosAsBigDecimal())
						<linea>
							<texto align="left" size="31">Puntos acumulados:</texto>
							#if ($puntosNoDisponibles)
								#if (${ticket.getCabecera().getUidActividad().contains("TIENDA_ANIMAL")})
									<texto align="right" size="10">${ticket.getCabecera().getDatosFidelizado().getSaldoTotal().add($puntosNoDisponibles).subtract($ticket.getPuntosDevueltosAsBigDecimal()).setScale(0, 4)}</texto>
								#else
									<texto align="right" size="10">${ticket.getCabecera().getDatosFidelizado().getSaldoTotal().add($puntosNoDisponibles).subtract($ticket.getPuntosDevueltosAsBigDecimal()).setScale(2, 4)}</texto>
								#end
							#else
								#if (${ticket.getCabecera().getUidActividad().contains("TIENDA_ANIMAL")})
									<texto align="right" size="10">${ticket.getCabecera().getDatosFidelizado().getSaldoTotal().subtract($ticket.getPuntosDevueltosAsBigDecimal()).setScale(0, 4)}</texto>
								#else
									<texto align="right" size="10">${ticket.getCabecera().getDatosFidelizado().getSaldoTotal().subtract($ticket.getPuntosDevueltosAsBigDecimal()).setScale(2, 4)}</texto>
								#end

							#end
						</linea>
						#end
					#else
						<linea>
							<texto align="left" size="31">Puntos obtenidos:</texto>
							#if (${ticket.getCabecera().getUidActividad().contains("TIENDA_ANIMAL")})
								<texto align="right" size="10">${ticket.getTotales().getPuntos().setScale(0, 4)}</texto>
							#else
								<texto align="right" size="10">${ticket.getTotales().getPuntos().setScale(2, 4)}</texto>
							#end
						</linea>

						<linea>
							<texto align="left" size="31">Puntos disponibles:</texto>
							#if ($aplicaCarencia)
								#if (${ticket.getCabecera().getUidActividad().contains("TIENDA_ANIMAL")})
									<texto align="right" size="10">${ticket.getCabecera().getDatosFidelizado().getSaldoTotal().setScale(0, 4)}</texto>
								#else
									<texto align="right" size="10">${ticket.getCabecera().getDatosFidelizado().getSaldoTotal().setScale(2, 4)}</texto>
								#end
							#else
								#if (${ticket.getCabecera().getUidActividad().contains("TIENDA_ANIMAL")})
									<texto align="right" size="10">${ticket.getCabecera().getDatosFidelizado().getSaldoTotal().add($ticket.getTotales().getPuntos()).setScale(0, 4)}</texto>
								#else
									<texto align="right" size="10">${ticket.getCabecera().getDatosFidelizado().getSaldoTotal().add($ticket.getTotales().getPuntos()).setScale(2, 4)}</texto>
								#end
							#end
						</linea>

						#if ($aplicaCarencia)
							<linea>
								<texto align="left" size="31">Puntos acumulados:</texto>
								#if ($puntosNoDisponibles)
									#if (${ticket.getCabecera().getUidActividad().contains("TIENDA_ANIMAL")})
										<texto align="right" size="10">${ticket.getCabecera().getDatosFidelizado().getSaldoTotal().add($ticket.getTotales().getPuntos().add($puntosNoDisponibles)).setScale(0, 4)}</texto>
									#else
										<texto align="right" size="10">${ticket.getCabecera().getDatosFidelizado().getSaldoTotal().add($ticket.getTotales().getPuntos().add($puntosNoDisponibles)).setScale(2, 4)}</texto>
									#end
								#else
									#if (${ticket.getCabecera().getUidActividad().contains("TIENDA_ANIMAL")})
										<texto align="right" size="10">${ticket.getCabecera().getDatosFidelizado().getSaldoTotal().add($ticket.getTotales().getPuntos()).setScale(0, 4)}</texto>
									#else
										<texto align="right" size="10">${ticket.getCabecera().getDatosFidelizado().getSaldoTotal().add($ticket.getTotales().getPuntos()).setScale(2, 4)}</texto>
									#end
								#end
							</linea>
						#end

						#if (${puntosConsumidos} > 0)
							<linea>
								<texto align="left" size="31">Puntos canjeados en artículos:</texto>
								<texto align="right" size="10">$puntosConsumidos.setScale(0,4)</texto>
							</linea>
						#end

					#end
				#end

			#end

		#end

		##printLineaSubrayado()

		##end
		#if(${ticket.getCabecera().getDatosEnvio()})
			##printLineaSubrayado()
            <linea><texto align="center" size="41">ENVÍO A DOMICILIO</texto></linea>
			##printLineaSubrayado()
		#end

		<!--
			tipo-leyenda: Impresión del número junto al código de barras
				0: No se imprime
				1: Se imprime encima del código de barras
				2: Se imprime debajo del código de barras
				3: Se imprime encima y debajo del código de barras
			-->
		<linea>
			<linea><texto align="left" size="3"> </texto></linea>
		</linea>
		<codbar align="center" tipo-leyenda="2" >${ticket.getCabecera().getLocalizador()}</codbar>
		<!-- <codbar type="QR">${urlQR}${ticket.getCabecera().getUidTicket()}</codbar> -->

		#if (${ticket.getCabecera().getUidActividad().contains("KIWOKO")})
			<linea><texto size="41" align="center">-----------------------------------------</texto></linea>
			<linea line-size = "1"> <texto size="41" align="center">GRACIAS POR SU VISITA</texto> </linea>
			<linea><texto size="41" align="center">-----------------------------------------</texto></linea>
			<linea> <texto size="55" align="center" fontsize="4" >Los cupones Mundo Kiwoko son nominativos e</texto> </linea>
			<linea> <texto size="55" align="center" fontsize="4" >intransferibles, por lo que, para identificar al</texto> </linea>
			<linea> <texto size="55" align="center" fontsize="4" >titular pediremos el número de DNI. No se acepta la</texto> </linea>
			<linea> <texto size="55" align="center" fontsize="4" >devolución de productos de higiene. No se acepta la</texto> </linea>
			<linea> <texto size="55" align="center" fontsize="4" >devolución de medicamentes veterinarios con o sin</texto> </linea>
			<linea> <texto size="55" align="center" fontsize="4" >receta (entre, otros, parasitarios), salvo los casos</texto> </linea>
			<linea> <texto size="55" align="center" fontsize="4" > previstos en la norma de aplicación.</texto> </linea>
		#end

        #if (${ticket.getCabecera().getUidActividad().contains("KIWOKO_ES")} && ${urlTemporalQR} && !${urlTemporalQR.equals("")})
            <linea> <texto> </texto> </linea>
            <linea> <texto> </texto> </linea>
            <linea>
                <texto fontsize="5" style="3" align="center">SORTEAZO 18 ANIVERSARIO KIWOKO</texto>
            </linea>
            <linea>
                <texto fontsize="4" style="1" align="center">Participa capturando el siguiente código QR:</texto>
            </linea>
            <codbar type="QR">${urlTemporalQR}</codbar>
        #end

		#parse("./plantillas/promocion_texto.xml")

		#if(${apartado})
			#if($imprimirLogo)
				<linea><texto></texto></linea>
				<linea><texto></texto></linea>
				<linea><texto></texto></linea>
			#end
			<corte></corte>
			<linea><texto size="41" align="center">Justificante entrega articulos apartado</texto> </linea>
			<linea></linea>
			<linea><texto>Apartado:${apartado}</texto> </linea>
			#if ((${ticket.getCabecera().getCliente().getDatosFactura()}) && (${ticket.getCabecera().getCliente().getDatosFactura().getNombre()}))
				<linea><texto>Cliente:${ticket.getCabecera().getCliente().getDatosFactura().getNombre()}</texto> </linea>
			#else
				<linea><texto>Cliente:${ticket.getCliente().getNombreComercial()}</texto> </linea>
			#end
			<linea><texto>Fecha:${ticket.getCabecera().getFechaAsLocale()}</texto></linea>
			<linea><texto>${ticket.getCabecera().getDesTipoDocumento()}:${ticket.getCabecera().getCodTicket()}</texto> </linea>
			<linea><texto>Importe:${ticket.getTotales().getTotalAPagarAsString()}</texto> </linea>
			<linea> <texto> </texto> </linea>
			<linea> <texto style ="1" >DETALLE DE PAGOS</texto> </linea>
			<linea><texto size="41" align="center">-----------------------------------------</texto></linea>
			#parse("./plantillas/detalle_pagos.xml")
			<linea> <texto> </texto> </linea>
			<linea><texto size="41" align="center">Ejemplar para el establecimiento</texto> </linea>
			<linea></linea>
		#end

		#if($imprimirLogo)
			<linea><texto></texto></linea>
			<linea><texto></texto></linea>
			<linea><texto></texto></linea>
		#end
		<corte></corte>
		##foreach ($pago in $ticket.getPagos())
		##set($esBoletaCompleta = true)
		##parse("./plantillas/detalle_pagos_boletas.xml")
		##end
		#parse("./plantillas/detalle_comprobantes_giftcard.xml")
		#if(${ticket.getCabecera().getDatosEnvio()})
			<linea><texto></texto></linea>
			<linea><texto></texto></linea>
			<linea><texto></texto></linea>
			<linea><texto align="center" size="41">DATOS DE ENVÍO</texto></linea>
			<linea><texto size="41" align="center">-----------------------------------------</texto></linea>
			<linea>
				<texto size="50" align="left">${ticket.getCabecera().getDesTipoDocumento()} : ${ticket.getCabecera().getCodTicket()}</texto>
			</linea>
			#if (${ticket.getCabecera().getDatosEnvio().getNombreComercial()})
			<linea>
				<texto>Nombre: </texto>
				<texto align="left">${ticket.getCabecera().getDatosEnvio().getNombreComercial()}</texto>
			</linea>
			#end
			#if (${ticket.getCabecera().getDatosEnvio().getTipoIdentificacion()})
				#if(${ticket.getCabecera().getDatosEnvio().getCif()})
				<linea>
					<texto>${ticket.getCabecera().getDatosEnvio().getTipoIdentificacion()}: </texto>
					<texto align="left">${ticket.getCabecera().getDatosEnvio().getCif()}</texto>
				</linea>
				#end
			#end
			#if (${ticket.getCabecera().getDatosEnvio().getDomicilio()})
			<linea>
				<texto>Domicilio: </texto>
				<texto align="left">${ticket.getCabecera().getDatosEnvio().getDomicilio()}</texto>
			</linea>
			#end
			#if (${ticket.getCabecera().getDatosEnvio().getPoblacion()})
			<linea>
				<texto>Poblacion: </texto>
				<texto align="left">${ticket.getCabecera().getDatosEnvio().getPoblacion()}</texto>
			</linea>
			#end
			#if (${ticket.getCabecera().getDatosEnvio().getProvincia()})
			<linea>
				<texto>Provincia: </texto>
				<texto align="left">${ticket.getCabecera().getDatosEnvio().getProvincia()}</texto>
			</linea>
			#end
			#if (${ticket.getCabecera().getDatosEnvio().getLocalidad()})
			<linea>
				<texto>Localidad: </texto>
				<texto align="left">${ticket.getCabecera().getDatosEnvio().getLocalidad()}</texto>
			</linea>
			#end
			#if (${ticket.getCabecera().getDatosEnvio().getPais()})
			<linea>
				<texto>Pais: </texto>
				<texto align="left">${ticket.getCabecera().getDatosEnvio().getPais()}</texto>
			</linea>
			#end
			#if (${ticket.getCabecera().getDatosEnvio().getCp()})
			<linea>
				<texto>C.P.: </texto>
				<texto align="left">${ticket.getCabecera().getDatosEnvio().getCp()}</texto>
			</linea>
			#end
			#if (${ticket.getCabecera().getDatosEnvio().getTelefono1()})
			<linea>
				<texto>Teléfono: </texto>
				<texto align="left">${ticket.getCabecera().getDatosEnvio().getTelefono1()}</texto>
			</linea>
			#end
			#if($imprimirLogo)
				<linea><texto></texto></linea>
				<linea><texto></texto></linea>
				<linea><texto></texto></linea>
			#end
			<corte></corte>
		#end
	</documento>
	## #end
	## #end
</plantilla>